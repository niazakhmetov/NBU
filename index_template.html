<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ L.title_main | default('–û–±–º–µ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã') }} | TengeHub</title>
    
    {# ‚≠ê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ–¥–∏–Ω–æ–≥–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–∏–ª—è #}
    <link rel="stylesheet" href="styles/main.css">
</head>
{# ‚≠ê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã, –µ—Å–ª–∏ –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ localStorage. –ö–ª–∞—Å—Å dark-theme —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è JS. #}
<body>
    
    {# =================================================================
       1. –®–ê–ü–ö–ê, –ù–ê–í–ò–ì–ê–¶–ò–Ø –ò –ö–û–ù–¢–†–û–õ–´
       (–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∏–ª–∏ .navbar –∏ .controls-group –∏–∑ main.css)
       ================================================================= #}
    <header>
        <div class="container navbar">
            <div class="logo">TengeHub</div> 
            
            {# ‚≠ê –ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: –ì–ª–∞–≤–Ω–∞—è, –í—Å–µ –∫—É—Ä—Å—ã, –°—Ç–∞—Ç—É—Å, –û –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ #}
            <nav>
                <a href="index.html" class="active">{{ L.nav_main | default('–ì–ª–∞–≤–Ω–∞—è') }}</a>
                <a href="full_rates.html">{{ L.nav_all_rates | default('–í—Å–µ –∫—É—Ä—Å—ã') }}</a>
                <a href="status.html">{{ L.nav_status | default('–°—Ç–∞—Ç—É—Å') }}</a>
                <a href="about.html">{{ L.nav_about | default('–û –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ') }}</a>
            </nav>
            
            {# ‚≠ê –ì—Ä—É–ø–ø–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –∏ —Ç–µ–º—ã #}
            <div class="controls-group">
                <div id="language-switcher">
                    {# –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ setLang() –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ #}
                    <button class="theme-toggle" onclick="setLang('ru')" data-lang="ru">RU</button>
                    <button class="theme-toggle" onclick="setLang('kz')" data-lang="kz">KZ</button>
                    <button class="theme-toggle" onclick="setLang('en')" data-lang="en">EN</button>
                </div>
                {# –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã: –∏–∫–æ–Ω–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS #}
                <button class="theme-toggle" onclick="toggleTheme()" id="theme-toggle-btn">
                    ‚òÄÔ∏è
                </button>
            </div>
        </div>
    </header>
    
    {# =================================================================
       2. –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢
       (–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∏–ª–∏ .container –∏ .card)
       ================================================================= #}
    <main class="container">
        
        <h1 style="margin-bottom: 25px;">
            {{ L.title_main | default('–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ë–∞–Ω–∫–∞ –†–ö') }}
        </h1>

        {# --- –ë–õ–û–ö –° –î–ê–¢–û–ô –ò –ö–†–ê–¢–ö–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ï–ô --- #}
        <section class="card" style="margin-top: 20px;">
            <p style="color: var(--color-text-secondary);">
                {{ L.date_info | default('–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ë–∞–Ω–∫–∞ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞:') }}
            </p>
            <h2 style="font-size: 1.8em; margin-top: 5px; color: var(--color-text-primary);">
                {{ course_date | default('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö') }}
            </h2>
            <p style="margin-top: 15px;">
                <a href="full_rates.html" style="font-weight: 600;">
                    {{ L.cta_all_rates | default('–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ 52 –∫—É—Ä—Å–∞ ‚Üí') }}
                </a>
            </p>
        </section>

        {# --- –¢–ê–ë–õ–ò–¶–ê –ö–õ–Æ–ß–ï–í–´–• –í–ê–õ–Æ–¢ --- #}
        <section class="card" style="padding: 0; margin-top: 30px;">
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 55%;">{{ L.table_currency | default('–í–∞–ª—é—Ç–∞') }}</th>
                        <th style="width: 15%; text-align: center;">{{ L.table_rate | default('–ö—É—Ä—Å (KZT)') }}</th>
                        <th style="width: 15%; text-align: center;">{{ L.table_quant | default('–ï–¥–∏–Ω–∏—Ü–∞') }}</th>
                        <th style="width: 15%; text-align: right;">{{ L.table_change | default('–ò–∑–º–µ–Ω–µ–Ω–∏–µ') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {# ‚≠ê –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –¥–∞–Ω–Ω—ã–º –∫—É—Ä—Å–æ–≤ #}
                    {% for item in key_rates %}
                    <tr>
                        {# –î–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–µ—Ç–∫–∞ data-label, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ CSS @media #}
                        <td data-label="{{ L.table_currency | default('–í–∞–ª—é—Ç–∞') }}">{{ item.fullname | default('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ') }} ({{ item.title }})</td>
                        <td data-label="{{ L.table_rate | default('–ö—É—Ä—Å (KZT)') }}" style="text-align: center;">{{ item.description }}</td>
                        <td data-label="{{ L.table_quant | default('–ï–¥–∏–Ω–∏—Ü–∞') }}" style="text-align: center; color: var(--color-text-secondary);">{{ item.quant }}</td>
                        
                        {# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ styles/main.css #}
                        <td data-label="{{ L.table_change | default('–ò–∑–º–µ–Ω–µ–Ω–∏–µ') }}" 
                            class="{% if item.index == 'UP' %}change-up{% elif item.index == 'DOWN' %}change-down{% else %}change-neutral{% endif %}"
                            style="text-align: right;">
                            {{ item.change | default('0.00') }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>

    </main>
    
    {# =================================================================
       3. –ü–û–î–í–ê–õ (–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å –∏–∑ main.css)
       ================================================================= #}
    <footer>
        <div class="container">
            <p>
                &copy; {{ now().strftime('%Y') | default('2025') }} TengeHub. 
                <span style="font-weight: 600;">{{ L.source_p_short | default('–ò—Å—Ç–æ—á–Ω–∏–∫: –ù–ë –†–ö.') }}</span>
            </p>
        </div>
    </footer>

    {# =================================================================
       4. JS –î–õ–Ø –ú–£–õ–¨–¢–ò–Ø–ó–´–ß–ù–û–°–¢–ò –ò –¢–ï–ú–´
       (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω, –ª–æ–≥–∏–∫–∞ —è–∑—ã–∫–∞ —É–ø—Ä–æ—â–µ–Ω–∞)
       ================================================================= #}
    <script>
        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–∑—ã–∫–∞ (–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥, —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è —Å–º–µ–Ω—ã L) ---
        let currentLang = '{{ L.language_code | default("ru") }}'; 
        
        function setLang(lang) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É 
            // —Å –Ω–æ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —è–∑—ã–∫–∞ (?lang=en), —á—Ç–æ–±—ã Jinja (L.xxx) –º–æ–≥ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç—ã.
            
            // –ó–¥–µ—Å—å –º—ã —Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            currentLang = lang;
            document.documentElement.lang = lang;
            
            document.querySelectorAll('#language-switcher button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active'); 
                }
            });
            
            // –í–Ω–∏–º–∞–Ω–∏–µ: –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            // window.location.href = `?lang=${lang}`; 
        }
        
        // --- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã ---
        function toggleTheme() {
            const body = document.body;
            const btn = document.getElementById('theme-toggle-btn');
            
            body.classList.toggle('dark-theme');
            
            const isDark = body.classList.contains('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∫–Ω–æ–ø–∫–∏
            btn.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
        }

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ---
        window.onload = () => {
            // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–∑—ã–∫–∞
            setLang(currentLang);
            
            // 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
            const savedTheme = localStorage.getItem('theme');
            const btn = document.getElementById('theme-toggle-btn');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                btn.textContent = 'üåô';
            } else {
                // –ï—Å–ª–∏ —Ç–µ–º–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏–ª–∏ 'light', —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                btn.body.classList.remove('dark-theme');
                btn.textContent = '‚òÄÔ∏è';
            }
        };
    </script>
</body>
</html>
