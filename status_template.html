<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ L.status_h2 | default('Статус системы') }} | TengeHub</title>
    <link rel="stylesheet" href="styles/main.css"> 
</head>
<body>
    
    {# =================================================================
       1. ШАПКА И НАВИГАЦИЯ (Использование классов .navbar и .logo)
       ================================================================= #}
    <header>
        <div class="container navbar">
            <div class="logo">TengeHub</div> 
            
            <nav>
                <a href="index.html">{{ L.nav_main }}</a>
                <a href="full_rates.html">{{ L.nav_all_rates }}</a>
                <a href="about.html">{{ L.nav_about }}</a>
                {# Устанавливаем активный класс для текущей страницы #}
                <a href="status.html" class="active">{{ L.nav_status | default('Статус') }}</a> 
            </nav>
            {# В корпоративном дизайне кнопки смены языка можно перенести в подвал или убрать, если платформа одноязычная. Здесь оставлен пустой блок для баланса шапки. #}
            <div></div> 
        </div>
    </header>
    
    {# =================================================================
       2. ОСНОВНОЙ КОНТЕНТ (Использование класса .container и .card)
       ================================================================= #}
    <div class="container">
        
        <h1 style="margin-bottom: 25px;">{{ L.status_h2 | default('Статус платформы') }}</h1>
        
        {# --- БЛОК 1: ОБЗОР СТАТУСА --- #}
        <section class="card">
            
            <p style="color: var(--color-text-secondary); margin-bottom: 20px;">
                {{ L.description | default('Информация о статусе синхронизации данных с Национальным Банком РК.') }}
            </p>

            {# Таблица для четкого отображения ключевых метрик #}
            <table class="data-table">
                <tbody>
                    <tr>
                        <th>{{ L.status_system_status }}</th>
                        {# Применение классов статуса из main.css (.change-up/.change-down) #}
                        <td class="{% if system_status == 'OK' %}change-up{% else %}change-down{% endif %}">
                            {% if system_status == 'OK' %}
                                {{ L.status_system_ok | default('ОК') }} (Синхронизация прошла успешно)
                            {% else %}
                                {{ L.status_system_error | default('Ошибка') }} (Требуется внимание. Проверьте логи.)
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th>{{ L.status_last_updated }}</th>
                        <td>
                            {# Визуально выделяем время последнего обновления #}
                            <span style="font-weight: 600;">{{ last_updated_time | default('Данные не обновлялись') }}</span>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ L.status_current_date }}</th>
                        <td>{{ course_date | default('Дата курсов неизвестна') }}</td>
                    </tr>
                    <tr>
                        <th>{{ L.status_source_api }}</th>
                        <td>
                            <a href="https://nationalbank.kz/rss/get_rates.cfm" target="_blank" style="color: var(--color-brand-secondary);">
                                https://nationalbank.kz/rss/get_rates.cfm
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ L.status_source_type }}</th>
                        <td>Публичный URL-сервис (RSS/XML)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        {# --- БЛОК 2: ПРИМЕЧАНИЕ (Стиль предупреждения) --- #}
        {# Используем светлые цвета для note-box в светлой теме и темные для темной #}
        <div class="card" style="margin-top: 30px; border-left: 5px solid var(--color-brand-primary); background-color: var(--color-table-header);">
            <h4>{{ L.status_note | default('Важное примечание') }}</h4>
            <p style="color: var(--color-text-secondary);">
                {{ L.status_note_text | default('Данные генерируются автоматически после получения ответа от Национального Банка РК. Время обновления может зависеть от графика публикации НБ РК.') }}
            </p>
        </div>
        
    </div>
    
    {# =================================================================
       3. ПОДВАЛ (Использование тега <footer> и стилей из main.css)
       ================================================================= #}
    <footer>
        <div class="container">
            <p>
                &copy; {{ now().strftime('%Y') | default('2025') }} TengeHub. 
                <span style="font-weight: 600;">{{ L.source_p | default('Источник: НБ РК.') }}</span>
            </p>
        </div>
    </footer>
</body>
</html>
